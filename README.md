# WEBPRG-project
## 1. Анализ задания и обзор аналогов
[Ссылка на комментируемый гугл док с постановкой задачи, обзором аналогов и функциональными требованиями](https://docs.google.com/document/d/11IPTOpYrngHfhjV18yGlvcDVPRP77uxREJacoG-V0WQ/edit?usp=sharing)
## 2. Проектирование прецедентов использования
### Список акторов
1. Guest - неавторизованный пользователь, может только просматривать профили остальных пользователей
2. User - авторизованный пользователь, при регистрации происходит оценка ценности его времени, обладает функционалом для взаимодействия с другими пользователями, может ограничить доступ к группе
3. Admin - администратор системы, модерирует пользователей и обладает большей частью функционала авторизованного пользователя
4. Resercher - исследователь. Исследователем пользователя может сделать только администратор. Обладает доступом к инструментам анализа поведения пользователей. Так же обладает возможностью предлагать способы улучшения работы системы

### Usecase-диаграмма
<img src="https://user-images.githubusercontent.com/44303944/140403020-e81e0113-dba4-483b-924c-6b2d75fc944e.png" alt="webprgusecase drawio" width="50%"/>

### Спецификации прецедентов использования
- Регистрация и аутентификация - доступ есть только у не зарегистрированных пользователей;
- Просмотр профиля - доступен всем пользователям, формируется страница с указанием личных данных пользователя(набор публично доступных данных определяется пользователем, в случае если доступ к профилю пользователя ограничен, происходит редирект на главную страницу системы;
- Унижение пользователя - специальная функция для того, чтобы обозначить негативное отношение к другому пользователю и существенно повлиять на его оценку. Когда пользователь унижен, появляется возможность заблокировать его;
- Выражение восхищения пользователем - функция, обратная унижению пользователя;
- Обновление персональной информации - доступно только авторизованным пользователям. Пользователь заполняет форму, а после система автоматически обновляет ценность его времени;
- Создание группы пользователей - после создания пользователь становится владельцем группы получает возможность управления группой. Группа - сущность, которая влияет на ценность времени, состоящих в ней пользователей. Создается автоматически при создании групового чата. Может быть публичной и приватной. Чат может быть отключен в любое время;
- Отправка сообщения - сообщения могут отправлять все пользователи, кроме гостей. Удаление сообщений невозможно, но при этом возможна отправка временных сообщений;
- Формирование отчёта о поведении пользователя - доступно администраторам и исследователям. По запросу система генерирует страницу, на которой приводится анонимизированная статистика взаимодействия пользователя с другими пользователями;
- Предложение изменений и запрос вознаграждения - в случае, если исследователь видит возможность для уточнения оценки, он может заполнить специальную форму и запросить вознаграждение. Администратор рассмотрит предложение и решит, учитывать ли его. Функция выплаты вознаграждения выходит за рамки реализуемой системы.


## 3. Проектирование БД
### Список сущностей
<table>
    <thead>
        <tr>
            <th>Сущность</th>
            <th>Свойства</th>
            <th>Комментарии</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td rowspan=8>User</td>
            <td>User ID</td>
            <td>Идентификационный номер, обязательное, уникальное</td>
        </tr>
        <tr>
            <td>First name</td>
            <td>Имя, обязательное</td>
        </tr>
        <tr>
            <td>Last name</td>
            <td>Фамилия, обязательное</td>
        </tr>
        <tr>
            <td>Username</td>
            <td>Имя пользователя, обязательное, уникальное</td>
        </tr>
        <tr>
            <td>Email</td>
            <td>Электронная почта, обязательное, уникальное</td>
        </tr>
        <tr>
            <td>Password</td>
            <td>Пароль, обязательное</td>
        </tr>
        <tr>
            <td>is_Blocked</td>
            <td>Является ли пользователь заблокированным на сайте, обязательное</td>
        </tr>
      <tr>
            <td>Time value</td>
            <td>Ценность времени пользователя, обязательное</td>
        </tr>
        <tr>
            <td rowspan=5>Message</td>
            <td>Message ID</td>
            <td>Идентификационный номер, обязательное, уникальное</td>
        </tr>
        <tr>
            <td>Author ID</td>
            <td>Идентификационный номер отправителя, обязательное</td>
        </tr>
        <tr>
            <td>Receiver ID</td>
            <td>Идентификационный номер получателя, обязательное</td>
        </tr>
        <tr>
            <td>Text</td>
            <td>Текст сообщения, необязательное</td>
        </tr>
        <tr>
            <td>Content dir</td>
            <td>Путь до статических файлов, прикреплённых к сообщению, необязательное</td>
        </tr>
        <tr>
            <td rowspan=5>Post</td>
            <td>Post ID</td>
            <td>Идентификационный номер, обязательное, уникальное</td>
        </tr>
        <tr>
            <td>Author ID</td>
            <td>Идентификационный номер отправителя, обязательное</td>
        </tr>
        <tr>
            <td>Text</td>
            <td>Текст сообщения, необязательное</td>
        </tr>
        <tr>
            <td>Rating</td>
            <td>Рейтинг поста, необязательное</td>
        </tr>
        <tr>
            <td>Content dir</td>
            <td>Путь до статических файлов, прикреплённых к сообщению, необязательное</td>
        </tr>
        <tr>
            <td rowspan=5>Comment</td>
            <td>Comment ID</td>
            <td>Идентификационный номер, обязательное, уникальное</td>
        </tr>
        <tr>
            <td>Author ID</td>
            <td>Идентификационный номер отправителя, обязательное</td>
        </tr>
        <tr>
            <td>Post ID</td>
            <td>Идентификационный номер поста, к которому относится комментарий, обязательное</td>
        </tr>
        <tr>
            <td>Text</td>
            <td>Текст комментария, необязательное</td>
        </tr>
        <tr>
            <td>Content dir</td>
            <td>Путь до статических файлов, прикреплённых к сообщению, необязательное</td>
        </tr>
        <tr>
            <td rowspan=4>Reaction</td>
            <td>Author ID</td>
            <td>Идентификационный номер пользователя, выражающего своё отношение, обязательное</td>
        </tr>
        <tr>
            <td>Object ID</td>
            <td>Идентификационный номер пользователя, в отношении которого было высказано мнение, обязательное</td>
        </tr>
        <tr>
            <td>is_Positive</td>
            <td>Является ли реакция положительной, обязательное</td>
        </tr>
        <tr>
            <td>Comment</td>
            <td>Текст сообщения, необязательное</td>
        </tr>
        <tr>
            <td rowspan=5>Group message</td>
            <td>Group message ID</td>
            <td>Идентификационный номер группового сообщения, обязательное, уникальное</td>
        </tr>
        <tr>
            <td>User ID</td>
            <td>Идентификационный номер пользователя, в отношении которого было высказано мнение, обязательное</td>
        </tr>
        <tr>
            <td>Group ID</td>
            <td>Является ли реакция положительной, обязательное</td>
        </tr>
        <tr>
            <td>Text</td>
            <td>Текст сообщения, необязательное</td>
        </tr>
        <tr>
            <td>Content dir</td>
            <td>Путь до статических файлов, прикреплённых к сообщению, необязательное</td>
        </tr>
        <tr>
            <td rowspan=3>Staff</td>
            <td>is_Admin</td>
            <td>Является ли пользователь администратором системы, обязательное</td>
        </tr>
        <tr>
            <td>User ID</td>
            <td>Идентификационный номер пользователя, обязательное, уникальное</td>
        </tr>
        <tr>
            <td>is_Moderator</td>
            <td>Является ли пользователь модератором, обязательное</td>
        </tr>
        <tr>
            <td rowspan=4>Group</td>
            <td>Group ID</td>
            <td>Идентификационный номер группы, обязательное, уникальное</td>
        </tr>
        <tr>
            <td>is_Private</td>
            <td>Является ли группа закрытой, обязательное</td>
        </tr>
      <tr>
            <td>Name</td>
            <td>Название группы, обязательное</td>
        </tr>
      <tr>
            <td>Time value multiplier</td>
            <td>Коэфициент ценности принадлежности к определенной группе, обязательное</td>
        </tr>
        <tr>
            <td rowspan=3>Group member</td>
            <td>Group ID</td>
            <td>Идентификационный номер группового сообщения, обязательное, уникальное</td>
        </tr>
        <tr>
            <td>User ID</td>
            <td>Идентификационный номер пользователя, в отношении которого было высказано мнение, обязательное</td>
        </tr>
        <tr>
            <td>Role</td>
            <td>Должность пользователя в группе, обязательное</td>
        </tr>
        <tr>
            <td rowspan=2>Researcher</td>
            <td>User ID</td>
            <td>Идентификационный номер пользователя, в отношении которого было высказано мнение, обязательное</td>
        </tr>
        <tr>
            <td>Organization</td>
            <td>Организация, в которой работает исследователь, обязательное</td>
        </tr>
        <tr>
            <td rowspan=4>Research_Researcher</td>
            <td>Researcher ID</td>
            <td>Идентификационный номер исследователя, обязательное</td>
        </tr>
        <tr>
            <td>Research ID</td>
            <td>Идентификационный номер исследования, обязательное</td>
        </tr>
        <tr>
            <td>Reward part</td>
            <td>Часть от полагаемого вознаграждения, обязательное</td>
        </tr>
        <tr>
            <td>is_Paid</td>
            <td>Выплачено ли вознаграждение, обязательное</td>
        </tr>
        <tr>
            <td rowspan=4>Research</td>
            <td>Research ID</td>
            <td>Идентификационный номер исследования, обязательное, уникальное</td>
        </tr>
        <tr>
            <td>Research link</td>
            <td>Ссылка на исследование, обязательное</td>
        </tr>
        <tr>
            <td>Research rating</td>
            <td>Рейтинг исследования, обязательное</td>
        </tr>
        <tr>
            <td>Reward</td>
            <td>Вознаграждение, обязательное</td>
        </tr>
    </tbody>
</table>

### Список связей
<table>
    <thead>
        <tr>
            <th>Связь</th>
            <th>Сущность 1</th>
            <th>Сущность 2</th>
            <th>Тип связи</th>
        </tr>
    </thead>
    <tbody>
      <tr>
        <td>Участники сообщества</td>
        <td>Пользователь</td>
        <td>Сообщество</td>
        <td>Многие ко многим</td>
      </tr>
      <tr>
        <td>Авторы исследования</td>
        <td>Исследователь</td>
        <td>Исследование</td>
        <td>Многие ко многим</td>
      </tr>
      <tr>
        <td>Пользователь отправил сообщение в групповой чат</td>
        <td>Пользователь</td>
        <td>Группа</td>
        <td>Многие ко многим</td>
      </tr>
      <tr>
        <td>ПОльзователь высказал своё отношение к другому пользователю</td>
        <td>Пользователь</td>
        <td>Пользователь</td>
        <td>Один к одному</td>
      </tr>
      <tr>
        <td>Пользователь является администратором или модератором</td>
        <td>Пользователь</td>
        <td>Персонал</td>
        <td>Один к одному</td>
      </tr>
      <tr>
        <td>Пользователь отправил сообщение</td>
        <td>Пользователь</td>
        <td>Сообщение</td>
        <td>Один ко многим</td>
      </tr>
      <tr>
        <td>Пользователь получил сообщение</td>
        <td>Пользователь</td>
        <td>Сообщение</td>
        <td>Один ко многим</td>
      </tr>
      <tr>
        <td>Пользователь создал пост</td>
        <td>Пользователь</td>
        <td>Пост</td>
        <td>Один ко многим</td>
      </tr>
      <tr>
        <td>Пользователь оставил комментарий к посту</td>
        <td>Пользователь</td>
        <td>Пост</td>
        <td>Многие ко многим</td>
      </tr>
    </tbody>
</table>

### ER-диаграмма в нотации Чена
![chen drawio](https://user-images.githubusercontent.com/44303944/144518233-d11c2955-f68d-42ad-a1c4-67bda1fb2db7.png)


### Даталогическая модель
<img width="932" alt="Снимок экрана 2021-11-20 в 00 14 14" src="https://user-images.githubusercontent.com/44303944/142692604-9a1c1c83-13c9-4c9b-9492-66bb2d7bf173.png">
